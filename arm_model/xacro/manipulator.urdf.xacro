<?xml version="1.0"?>
<robot
	xmlns:xacro="http://www.ros.org/wiki/xacro"
	name="manipulator_model">

	<xacro:include filename="$(find arm_model)/xacro/macros.xacro" />

	<xacro:macro name="manipulator_model">
		<link name="world"/>
		<joint name="move_x" type="prismatic">
			<axis xyz="1 0 0"/>
			<parent link="world"/>
			<child link="x_axis_moving_base"/>
			<limit effort="1000.0" lower="-1" upper="1" velocity="0.5"/>
			<origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
		</joint>
		<link name="x_axis_moving_base"/>
		<joint name="move_y" type="prismatic">
			<axis xyz="0 1 0"/>
			<parent link="x_axis_moving_base"/>
			<child link="y_axis_moving_base"/>
			<limit effort="1000.0" lower="-1" upper="1" velocity="0.5"/>
			<origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
		</joint>
		<link name="y_axis_moving_base"/>
		<joint name="planar" type="fixed">
			<parent link="y_axis_moving_base"/>
			<child link="manipulator_base_link"/>
		</joint>
		<link name="manipulator_base_link">
			<visual>
				<geometry>
					<cylinder length="0.045" radius="0.055"/>
				</geometry>
				<material name="silver">
					<color rgba="0.75 0.75 0.75 1"/>
				</material>
				<origin rpy="0 0 0" xyz="0 0 0.0225"/>
			</visual>
			<collision>
				<geometry>
					<cylinder length="0.045" radius="0.055"/>
				</geometry>
				<origin rpy="0 0 0" xyz="0 0 0.0225"/>
			</collision>
			<inertial>
				<mass value="1.0"/>
				<origin rpy="0 0 0" xyz="0 0 0.0225"/>
				<xacro:cylinder_inertia mass="1" r="0.055" l="0.05" />
			</inertial>
		</link>
		<link name="turntable">
			<visual>
				<geometry>
					<cylinder length="0.03" radius="0.055"/>
				</geometry>
				<material name="silver">
					<color rgba="0.75 0.75 0.75 1"/>
				</material>
				<origin rpy="0 0 0" xyz="0 0 0.015"/>
			</visual>
			<collision>
				<geometry>
					<cylinder length="0.03" radius="0.055"/>
				</geometry>
				<origin rpy="0 0 0" xyz="0 0 0.015"/>
			</collision>
			<inertial>
				<mass value="1.0"/>
				<origin rpy="0 0 0" xyz="0 0 0.015"/>
				<xacro:cylinder_inertia mass="1" r="0.055" l="0.03" />
			</inertial>
		</link>
		<joint name="turn" type="continuous">
			<axis xyz="0 0 1"/>
			<parent link="manipulator_base_link"/>
			<child link="turntable"/>
			<origin rpy="0 0 0" xyz="0.0 0.0 0.045"/>
		</joint>
		<link name="upper_arm">
			<visual>
				<geometry>
					<cylinder length="0.12" radius="0.0275"/>
				</geometry>
				<material name="silver"/>
				<origin rpy="-1.5708 0 0" xyz="0 0.06 0"/>
			</visual>
			<collision>
				<geometry>
					<cylinder length="0.12" radius="0.0275"/>
				</geometry>
				<origin rpy="-1.5708 0 0" xyz="0 0.06 0"/>
			</collision>
			<inertial>
				<mass value="1.0"/>
				<origin rpy="-1.5708 0 0" xyz="0 0.06 0"/>
				<xacro:cylinder_inertia mass="1" r="0.0275" l="0.12" />
			</inertial>
		</link>
		<joint name="shoulder" type="continuous">
			<axis xyz="0 0 1"/>
			<parent link="turntable"/>
			<child link="upper_arm"/>
			<origin rpy="1.5708 0 0" xyz="0.0 0.0 0.0575"/>
		</joint>
		<link name="middle_arm">
			<visual>
				<geometry>
					<cylinder length="0.12" radius="0.0275"/>
				</geometry>
				<material name="silver"/>
				<origin rpy="-1.5708 0 0" xyz="0 0.06 0.0555"/>
			</visual>
			<collision>
				<geometry>
					<cylinder length="0.12" radius="0.0275"/>
				</geometry>
				<origin rpy="-1.5708 0 0" xyz="0 0.06 0.0555"/>
			</collision>
			<inertial>
				<mass value="1.0"/>
				<origin rpy="-1.5708 0 0" xyz="0 0.06 0.0555"/>
				<xacro:cylinder_inertia mass="1" r="0.0275" l="0.12" />
			</inertial>
		</link>
		<joint name="elbow" type="continuous">
			<axis xyz="0 0 1"/>
			<parent link="upper_arm"/>
			<child link="middle_arm"/>
			<origin rpy="0 0 0" xyz="0 0.12 0"/>
		</joint>
		<link name="lower_arm">
			<visual>
				<geometry>
					<cylinder length="0.055" radius="0.0275"/>
				</geometry>
				<material name="silver"/>
				<origin rpy="-1.5708 0 0" xyz="0 0.0275 0"/>
			</visual>
			<collision>
				<geometry>
					<cylinder length="0.055" radius="0.0275"/>
				</geometry>
				<origin rpy="-1.5708 0 0" xyz="0 0.0275 0"/>
			</collision>
			<inertial>
				<mass value="1.0"/>
				<origin rpy="-1.5708 0 0" xyz="0 0.0275 0"/>
				<xacro:cylinder_inertia mass="1" r="0.0275" l="0.055" />
			</inertial>
		</link>
		<joint name="another_elbow" type="continuous">
			<axis xyz="0 0 1"/>
			<parent link="middle_arm"/>
			<child link="lower_arm"/>
			<origin rpy="0 0 0" xyz="0 0.12 0"/>
		</joint>
		<link name="hand">
			<visual>
				<geometry>
					<box size="0.03 0.03 0.03"/>
				</geometry>
				<material name="silver"/>
				<origin rpy="0 0 0" xyz="0 0 0.015"/>
			</visual>
			<collision>
				<geometry>
					<box size="0.03 0.03 0.03"/>
				</geometry>
				<origin rpy="0 0 0" xyz="0 0 0.015"/>
			</collision>
			<inertial>
				<mass value="1.0"/>
				<origin rpy="0 0 0" xyz="0 0 0.015"/>
				<xacro:box_inertia mass="1" x="0.03" y="0.03" z="0.03" />
			</inertial>
		</link>
		<joint name="wrist" type="fixed">
			<parent link="lower_arm"/>
			<child link="hand"/>
			<origin rpy="-1.5708 0 0" xyz="0.0 0.055 0.0"/>
		</joint>

		<!--Transmission Descriptions-->
		<transmission name="tran0">
			<type>transmission_interface/SimpleTransmission</type>
			<joint name="turn">
				<hardwareInterface>PositionJointInterface</hardwareInterface>
			</joint>
			<actuator name="motor0">
				<hardwareInterface>PositionJointInterface</hardwareInterface>
				<mechanicalReduction>1</mechanicalReduction>
			</actuator>
		</transmission>
		<transmission name="tran1">
			<type>transmission_interface/SimpleTransmission</type>
			<joint name="shoulder">
				<hardwareInterface>PositionJointInterface</hardwareInterface>
			</joint>
			<actuator name="motor1">
				<hardwareInterface>PositionJointInterface</hardwareInterface>
				<mechanicalReduction>1</mechanicalReduction>
			</actuator>
		</transmission>
		<transmission name="tran2">
			<type>transmission_interface/SimpleTransmission</type>
			<joint name="elbow">
				<hardwareInterface>PositionJointInterface</hardwareInterface>
			</joint>
			<actuator name="motor2">
				<hardwareInterface>PositionJointInterface</hardwareInterface>
				<mechanicalReduction>1</mechanicalReduction>
			</actuator>
		</transmission>
		<transmission name="tran3">
			<type>transmission_interface/SimpleTransmission</type>
			<joint name="another_elbow">
				<hardwareInterface>PositionJointInterface</hardwareInterface>
			</joint>
			<actuator name="motor3">
				<hardwareInterface>PositionJointInterface</hardwareInterface>
				<mechanicalReduction>1</mechanicalReduction>
			</actuator>
		</transmission>
		<transmission name="tran4">
			<type>transmission_interface/SimpleTransmission</type>
			<joint name="move_x">
				<hardwareInterface>EffortJointInterface</hardwareInterface>
			</joint>
			<actuator name="motor4">
				<hardwareInterface>EffortJointInterface</hardwareInterface>
				<mechanicalReduction>1</mechanicalReduction>
			</actuator>
		</transmission>
		<transmission name="tran5">
			<type>transmission_interface/SimpleTransmission</type>
			<joint name="move_y">
				<hardwareInterface>EffortJointInterface</hardwareInterface>
			</joint>
			<actuator name="motor5">
				<hardwareInterface>EffortJointInterface</hardwareInterface>
				<mechanicalReduction>1</mechanicalReduction>
			</actuator>
		</transmission>

		<!-- Gazebo Plugins -->
		<gazebo>
			<!-- ros_control plugin -->
			<plugin name="control" filename="libgazebo_ros_control.so"/>
			<!-- joint_state_publisher plugin -->
			<plugin name="joint_state_publisher" filename="libgazebo_ros_joint_state_publisher.so">
					<jointName>turn, shoulder, elbow, another_elbow, move_y, move_x</jointName>
			</plugin>
		</gazebo>
	</xacro:macro>

	<xacro:manipulator_model/>
</robot>
